#!/bin/bash

# Tạo thư mục để lưu các file (nếu cần)
output_dir="/Users/richard/Data/80/files"
mkdir -p "$output_dir"

# Tổng số file cần tạo
total_files=10000

# Số file tạo mỗi lần
batch_size=1000

# Thời gian chờ giữa mỗi lần tạo batch (tính bằng giây)
delay=10

# Kiểm tra nếu tổng số file hoặc batch size không hợp lệ
if [ "$total_files" -le 0 ] || [ "$batch_size" -le 0 ]; then
    echo "Vui lòng nhập số lượng file và batch size hợp lệ."
    exit 1
fi

# Tạo file
batch_count=$((total_files / batch_size))
for batch in $(seq 1 "$batch_count"); do
    for file_num in $(seq 1 "$batch_size"); do
        file_index=$(( (batch - 1) * batch_size + file_num ))

        # Tạo file ABC-DT${file_index}.csv
        dd if=/dev/zero of="$output_dir/ABC-DT${file_index}.csv" bs=125 count=100 &>/dev/null

        # Tạo file DT${file_index}.csv.fin
        dd if=/dev/zero of="$output_dir/DT${file_index}.fin" bs=125 count=100 &>/dev/null
    done

    echo "Đã tạo xong batch $batch/$batch_count (tổng cộng $((batch * batch_size)) file)."

    # Chờ trước khi tạo batch tiếp theo
    if [ "$batch" -lt "$batch_count" ]; then
        sleep "$delay"
    fi
done

echo "Hoàn thành việc tạo $total_files file trong thư mục $output_dir"